{"version":3,"sources":["index.js"],"names":["galleryRef","document","querySelector","lightboxRef","lightboxOverlay","lightboxImageRef","lightBoxCloseBtn","galleryLits","createListItem","images","galleryItems","map","preview","original","description","join","onImageClick","event","preventDefault","target","dataset","source","onModalOpen","window","addEventListener","onCloseModalByEsc","onShowNextImage","onShowPreviousImage","nodeName","classList","remove","add","onChangeLightboxImageUrl","contains","src","alt","getIndex","findIndex","elem","setLightboxImageRefAttribute","index","nextImageSrc","nextImageAlt","setAttribute","code","currentImageIndex","length","onCloseModal","removeEventListener","onClearlightboxImageRef","onCloseLightboxByClick","currentTarget","removeAttribute","insertAdjacentHTML"],"mappings":";;;AAgIC,aAhID,QAAA,mBAGA,IAAMA,EAAaC,SAASC,cAAc,eACpCC,EAAcF,SAASC,cAAc,gBACrCE,EAAkBH,SAASC,cAAc,sBACzCG,EAAmBJ,SAASC,cAAc,oBAC1CI,EAAmBL,SAASC,cAChC,kCAGIK,EAAcC,EAAeC,QAQnC,SAASD,EAAgBE,GAChBA,OAAAA,EAAaC,IAAI,SAAwC,GAArCC,IAAAA,EAAAA,EAAAA,QAASC,EAAAA,EAAAA,SAAUC,EAAAA,EAAAA,YAGTD,MAAAA,0EAAAA,OAAAA,EAEtBD,4DAAAA,OAAAA,EACQC,+BAAAA,OAAAA,EACRC,uBAAAA,OAAAA,EANb,uCAUCC,KAAK,IAGV,SAASC,EAAaC,GAEbA,OADPA,EAAMC,iBACCD,EAAME,OAAOC,QAAQC,OAG9B,SAASC,EAAYL,IACnBA,EAAMC,iBACNK,OAAOC,iBAAiB,UAAWC,GACnCF,OAAOC,iBAAiB,UAAWE,GAClCH,OAAOC,iBAAiB,UAAWG,GACN,QAA1BV,EAAME,OAAOS,YAIU3B,SAASC,cAAc,aAEhDC,EAAY0B,UAAUC,OAAO,WAG/B3B,EAAY0B,UAAUE,IAAI,WAC1BC,EAAyBf,IAG3B,SAASe,EAAyBf,GAC5Bd,EAAY0B,UAAUI,SAAS,aACjC5B,EAAiB6B,IAAMlB,EAAaC,GACpCZ,EAAiB8B,IAAMlB,EAAME,OAAOgB,KAIvC,SAASC,IACC3B,OAAAA,OAAO4B,UAAU,SAAAC,GAAQjC,OAAAA,EAAiB6B,MAAQI,EAAKzB,WAGlE,SAAS0B,EAA6BC,GAC9BC,IAAAA,EAAehC,OAAO+B,GAAO3B,SAC7B6B,EAAejC,OAAO+B,GAAO1B,YACnCT,EAAiBsC,aAAa,MAAOF,GACrCpC,EAAiBsC,aAAa,MAAOD,GAGvC,SAAShB,EAAgBT,GACnB,GAAiB,eAAfA,EAAM2B,KAAR,CAIAC,IAAAA,EAAoBT,KAExBS,GAAqB,GACGpC,OAAOqC,OAAO,IACnCD,EAAoB,GAGvBN,EAA6BM,IAG/B,SAASlB,EAAoBV,GACzB,GAAiB,cAAfA,EAAM2B,KAAR,CAIEC,IAAAA,EAAoBT,IAEG,IAAtBS,IACFA,EAAoBpC,OAAOqC,QAI7BP,EAFDM,GAAqB,IAOvB,SAASE,IACPxB,OAAOyB,oBAAoB,UAAWvB,GACtCtB,EAAY0B,UAAUC,OAAO,WAC7BmB,IAGF,SAASxB,EAAkBR,GACN,WAAfA,EAAM2B,MACRG,IAIJ,SAASG,EAAuBjC,GAC1BA,EAAMkC,gBAAkBlC,EAAME,QAChC4B,IAIJ,SAASE,IACP5C,EAAiB+C,gBAAgB,OACjC/C,EAAiB+C,gBAAgB,OAnHnCpD,EAAWqD,mBAAmB,YAAa9C,GAE3CP,EAAWwB,iBAAiB,QAASF,GACrClB,EAAgBoB,iBAAiB,QAAS0B,GAC1C5C,EAAiBkB,iBAAiB,QAASuB","file":"src.c60102a4.js","sourceRoot":"..\\src","sourcesContent":["import \"./css/style.css\";\r\n// import images from \"./js/gallery-items.js\";\r\n\r\nconst galleryRef = document.querySelector(\".js-gallery\");\r\nconst lightboxRef = document.querySelector(\".js-lightbox\");\r\nconst lightboxOverlay = document.querySelector(\".lightbox__overlay\");\r\nconst lightboxImageRef = document.querySelector(\".lightbox__image\");\r\nconst lightBoxCloseBtn = document.querySelector(\r\n  '[data-action=\"close-lightbox\"]'\r\n);\r\n\r\nconst galleryLits = createListItem(images);\r\ngalleryRef.insertAdjacentHTML('beforeend', galleryLits);\r\n\r\ngalleryRef.addEventListener(\"click\", onModalOpen);\r\nlightboxOverlay.addEventListener(\"click\", onCloseLightboxByClick);\r\nlightBoxCloseBtn.addEventListener(\"click\", onCloseModal);\r\n\r\n\r\nfunction createListItem (galleryItems) {\r\n  return galleryItems.map(({ preview, original, description }) => {\r\n    return `\r\n    <li class=\"gallery__item\">\r\n      <a class=\"gallery__link\" href=\"${original}\">\r\n        <img class=\"gallery__image\"\r\n          src=\"${preview}\" \r\n          data-source=\"${original}\" \r\n          alt=\"${description}\"/>\r\n      </a>\r\n    </li >\r\n    `\r\n  }).join(\"\");\r\n};\r\n\r\nfunction onImageClick(event) {\r\n  event.preventDefault();\r\n  return event.target.dataset.source;\r\n}\r\n\r\nfunction onModalOpen(event) {\r\n  event.preventDefault();\r\n  window.addEventListener(\"keydown\", onCloseModalByEsc);\r\n  window.addEventListener(\"keydown\", onShowNextImage);\r\n   window.addEventListener(\"keydown\", onShowPreviousImage);\r\n  if (event.target.nodeName !== \"IMG\") {\r\n    return;\r\n  }\r\n\r\n  const currentActiveImage = document.querySelector(\".is-open\");\r\n  if (currentActiveImage) {\r\n    lightboxRef.classList.remove(\"is-open\");\r\n  }\r\n\r\n  lightboxRef.classList.add(\"is-open\");\r\n  onChangeLightboxImageUrl(event);\r\n}\r\n \r\nfunction onChangeLightboxImageUrl(event) {\r\n  if (lightboxRef.classList.contains(\"is-open\")) {\r\n    lightboxImageRef.src = onImageClick(event);\r\n    lightboxImageRef.alt = event.target.alt;\r\n  }\r\n}\r\n\r\n function getIndex() {\r\n    return images.findIndex(elem => lightboxImageRef.src === elem.original);\r\n}\r\n\r\nfunction setLightboxImageRefAttribute(index) {\r\n  const nextImageSrc = images[index].original;\r\n  const nextImageAlt = images[index].description;\r\n  lightboxImageRef.setAttribute(\"src\", nextImageSrc);\r\n  lightboxImageRef.setAttribute(\"alt\", nextImageAlt);\r\n}\r\n  \r\nfunction onShowNextImage(event) {\r\n  if (!(event.code === \"ArrowRight\")) {\r\n    return;\r\n  }\r\n\r\n  let currentImageIndex = getIndex();\r\n\r\n  currentImageIndex += 1;\r\n   if (currentImageIndex >images.length-1) {\r\n     currentImageIndex = 0;\r\n  }\r\n\r\n  setLightboxImageRefAttribute(currentImageIndex);\r\n\r\n}\r\nfunction onShowPreviousImage(event) {\r\nif (!(event.code === \"ArrowLeft\")) {\r\n    return;\r\n  }\r\n\r\n  let currentImageIndex = getIndex();\r\n\r\n   if (currentImageIndex === 0) {\r\n     currentImageIndex = images.length;\r\n  } \r\n  currentImageIndex -= 1;\r\n\r\n   setLightboxImageRefAttribute(currentImageIndex);\r\n\r\n}\r\n\r\n\r\nfunction onCloseModal() {\r\n  window.removeEventListener(\"keydown\", onCloseModalByEsc);\r\n  lightboxRef.classList.remove(\"is-open\");\r\n  onClearlightboxImageRef();\r\n}\r\n\r\nfunction onCloseModalByEsc(event) {\r\n  if (event.code === \"Escape\") {\r\n    onCloseModal();\r\n  }\r\n}\r\n\r\nfunction onCloseLightboxByClick(event) {\r\n  if (event.currentTarget === event.target) {\r\n    onCloseModal();\r\n  }\r\n}\r\n\r\nfunction onClearlightboxImageRef() {\r\n  lightboxImageRef.removeAttribute(\"src\");\r\n  lightboxImageRef.removeAttribute(\"alt\");\r\n}\r\n\r\n"]}